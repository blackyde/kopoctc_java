<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Insert title here</title>
<script src="https://code.jquery.com/jquery-latest.min.js"></script>
<script>
$.ajax({
	url: "http://localhost:8080/Ajax/ajax_twice.jsp",
	data: {}, //HTTP요청과 함께 서버로 보낼 데이터
	type: "POST",
	dataType: "json" //서버에서 보내줄 데이터 타입
})

//HTTP 요청이 성공하면 요청한 데이터가 done() 메서드로 전달됨
.done(function(json) {
	console.log(json);

	var twice = json.twice;
	
	for(var i = 0; i < twice.length; i++) {
		var row = "<tr>";
		row += "<td>" + twice[i].name + "</td>";
		row += "<td>" + twice[i].studentid + "</td>";
		row += "<td>" + twice[i].kor + "</td>";
		row += "<td>" + twice[i].eng + "</td>";
		row += "<td>" + twice[i].mat + "</td>";
		row += "</tr>";
		$("tbody:last").append(row);
	}
	
})

//HTTP 요청이 실패하면 오류와 상태에 관한 정보가 fial() 메서드로 전달됨
.fail(function(xhr, status, errorThrown) {
	console.log(xhr, status, errorThrown);
	$("#text").html("오류가 발생했습니다.<br>")
	.append("오류명: " + errorThrown + "<br>")
	.append("상태: " + status);
})

//HTTP 요청이 성공하거나 실패하거나 늘 always() 메서드가 실행됨
.always(function(xhr, status) {
	console.log(xhr, status);
	$("#text").html("요청이 완료되었습니다!");
})
</script>
<style>
table {
	border-collapse: collapse;
}
th, td {
	border: 1px solid #000000;
	padding: 5px;
}
tr > td:nth-child(n + 3) {
	text-align: right;
}
</style>
</head>
<body>
	<div id="text"></div>
	<table>
		<colgroup>
			<col style="width: 100px;" />
			<col style="width: 100px;" />
			<col style="width: 100px;" />
			<col style="width: 100px;" />
			<col style="width: 100px;" />
		</colgroup>
		<thead>
			<tr>
				<th>이름</th>
				<th>학번</th>
				<th>국어</th>
				<th>영어</th>
				<th>수학</th>
			</tr>
		</thead>
		<tbody>
		
		</tbody>
	</table>
</body>
</html>